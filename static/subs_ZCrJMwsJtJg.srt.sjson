{"start":[0,1320,1930,6100,10000,14920,17440,21830,24040,27340,29430,32930,34440,35450,36150,39330,43410,47920,49835,53320,55330,56280,58200,59800,60200,61580,64450,65550,69050,72400,74330,78150,80280,81990,84730,85770,88560,90290,92330,95090,96330,100710,102010,105280,107130,109790,112350,113460,116400,121840,123600,127130,129740,131790,134540,136620,139340,141260,143420,146300,147580,149600,152850,155210,159190,160810,163990,164230,166660,167420,170010,171750,174780,175810,176970,179420,180160,181890,183020,186140,187360,189820,192750,194810,196630,197670,199270,200010,202750,204860,205210,206770,208320,211210,213022,215220,219260,220770,222130,222660,226520,227910,232380,234140,235330,237750,240340,241960,246220,246890,248570,249800,251110,251710,252680,254480,256589,258649,261690,262340,263790,265100,266350,268850,270662,271570,274405,277210,280900,284400,284950,286280,286950,289500,291340,294340,294970,298140,301040,301770,305760,306150,309710,310050,310390,314070,317350,319680,321220,323810,324170,325370,328420,332310,335380,337570,339810,342850,344540,347170,349830,352520,358480,359830,361380,362780,364210,366020,367930,369120,374780,378140,382100,384290,387160,390410,391850,395140,399910,401810,405460,407700,412360,414780,416160,420340,420630,422370,429920,430580,432230,433455,435835,436930,438800,440600,444520,445940,449060,452130,453680,454990,459200,461040,462500,462670,464590,465880,468120,469820,472490,476640,479480,486920,489510,492580,496510,497290,500310,503470,506190,507680,510470,513549,516880,520520,521770,523530,524810,527370,528860,531750,534780,537520,542270,545930,547790,551320,552180,555950,558460,562210,564680,565940,568265,569050,572510,575850,579690,580810,581970,584610,584970,587360,589270,592790,596350,597200,601680,606730,610060,613470,615520,619380,620410,623990,627900,631960,633210,636580,636810,637720,639330,641310,641630,644270,647290,649280,650590,651980,654740],"end":[1320,1930,6100,10000,14920,17440,21830,24040,27340,29430,32930,34440,35450,36150,39330,43410,47920,49835,53320,55330,56280,58200,59800,60200,61580,64450,65550,69050,72400,74330,78150,80280,81990,84730,85770,88560,90290,92330,95090,96330,100710,102010,105280,107130,109790,112350,113460,116400,121840,123600,127130,129740,131790,134540,136620,139340,141260,143420,146300,147580,149600,152850,155210,159190,160810,163990,164230,166660,167420,170010,171750,174780,175810,176970,179420,180160,181890,183020,186140,187360,189820,192750,194810,196630,197670,199270,200010,202750,204860,205210,206770,208320,211210,213022,215220,219260,220770,222130,222660,226520,227910,232380,234140,235330,237750,240340,241960,246220,246890,248570,249800,251110,251710,252680,254480,256589,258649,261690,262340,263790,265100,266350,268850,270662,271570,274405,277210,280900,284400,284950,286280,286950,289500,291340,294340,294970,298140,301040,301770,305760,306150,309710,310050,310390,314070,317350,319680,321220,323810,324170,325370,328420,332310,335380,337570,339810,342850,344540,347170,349830,352520,358480,359830,361380,362780,364210,366020,367930,369120,374780,378140,382100,384290,387160,390410,391850,395140,399910,401810,405460,407700,412360,414780,416160,420340,420630,422370,429920,430580,432230,433455,435835,436930,438800,440600,444520,445940,449060,452130,453680,454990,459200,461040,462500,462670,464590,465880,468120,469820,472490,476640,479480,486920,489510,492580,496510,497290,500310,503470,506190,507680,510470,513549,516880,520520,521770,523530,524810,527370,528860,531750,534780,537520,542270,545930,547790,551320,552180,555950,558460,562210,564680,565940,568265,569050,572510,575850,579690,580810,581970,584610,584970,587360,589270,592790,596350,597200,601680,606730,610060,613470,615520,619380,620410,623990,627900,631960,633210,636580,636810,637720,639330,641310,641630,644270,647290,649280,650590,651980,654740,656100],"text":["","PROFESSOR: All right.","So in order to make this depth limited search work, when we decide we've gone","as deeply as we can, and we're faced with a state which is not a terminal","state, we need to have the ability to decide is it good or bad.","So what we have is an evaluation function.","What an evaluation function is, is a function which takes a non-terminal","state, and returns some number.","Now we know we want out of this number, just like we knew what we want","it out of a heuristic and A-star search.","In this case, we want the number to return the actual minimax value of","that position.","Now that's not going to happen.","Right?","That's the problem that's too hard to solve in the first place.","In practice, what people do is they try to come up with some function","which, on average, is positive when the minimax value is positive.","It's negative when the minimax value is negative.","It is in the ballpark to the extent that that's possible.","So you look at this case.","Here's a check tree.","A very small piece of a chess tree.","And you might have the root.","Right?","And so here's at the root.","And at the root, you could just apply your evaluation function.","You don't even need to do minimax.","You could just do a one step look ahead, and then apply your evaluation","function and just be greedy and hill climb your evaluation function.","In general, that's going to be very bad.","Even if your evaluation function is decent, you gain so much power by","embedding it in a minimax tree.","Here's another position.","This position might apply the same evaluation function, but","deeper in the tree.","So as long as the evaluation function's in the ballpark, it's much","safer to apply it down here.","Now what are these evaluation functions?","Well in the case of chess, we might say well there are some properties","that are important.","Like if white has more queens than black, that's probably a","good sign for white.","If white has more knights than black, that's a good sign for white.","But maybe not quite as important.","We might encapsulate some notion of board control.","We might have to consult with chess experts to figure out what these","features should be.","But what we do is we come up with a bunch of features, which are","themselves functions which look at the state and return some indicator.","So what we would have then is a bunch of features.","Maybe queen advantage, knight advantage, a bunch of things.","And then some measure of board control.","Now each of them contributes.","And the typical thing to do is combine them in a linear way.","More complicated things are absolutely possible.","There are some nice properties you get when you combine them linearly, which","we'll see later in the course.","So we might say, the queen advantage is more important.","It gets a coefficient of 10, whereas the knight advantage only gets a","coefficient of three.","And maybe board control is really important.","And maybe that gets a coefficient of 20.","So let's figure out what this actually looks like.","An evaluation function takes the state and returns a number that represents","the minimax value.","For something like PAC-MAN strictly speaking it should be a score.","Right?","Because that's what you would compute if you actually looked at the minimax","value of the game.","The terminal utilities are marked the scores.","So let's think about something like this.","You look at this and you think, what's the minimax value of that?","Well I mean, I don't know.","I'll eat a bunch of those dots, right.","It doesn't look particularly good or bad.","What about this?","Is it better or worse?","Yeah, it looks worse.","Now it may turn out that in fact it's not worse because over here, the ghost","may yet blank you.","Here they're basically been reduced to one ghost.","These are the ways in which it's a little bit subtle, right?","But at least on the surface, this looks a little worse because the","ghosts are closer.","OK, how about this?","Better or worse?","Looks worse.","There's a couple reasons why you might say this is worst.","One is that the dots have been eaten.","All right.","So there's fewer points left to get.","So depending on how you deal with the score.","Also you're kind of getting towards dead ends, and that's a little scary","when there are ghosts on your tail.","How about this?","Presumably our function should return that this is bad.","How about this?","Also bad.","OK.","So let's see what happens when you do evaluation functions in","the context of PAC-MAN.","So first, let's take a look at a simple board.","There aren't even any ghosts.","So you think this should be easy.","I'm going to do something like a depth two search.","And no ghosts are going to get in my way, and I'm going","to win really easily.","So let's think about what PAC-MAN does here in the case where you do a depth","two search.","And we need to truncation function.","So what's the truncation function?","Let's just use the score.","Right?","That's a pretty good indicator.","If the score is high, that's good.","If the score is bad, that's less good.","And so we're going to try to kind of maximize our score.","Not purely greedily, but based on a 2-step look ahead.","So here we go.","Here's the first step we take.","So far so good.","And then--","","OK.","OK.","And you're starting to doubt the agent here.","","Somehow, even though we've got a basically plausible evaluation","function, the score, and we're doing a little bit of look ahead, he's just","wigging out.","What's going on here?","OK.","So what is going on here?","Let's take a look.","Why does PAC-MAN starve?","OK.","Well this is actually a danger of replanting agents.","All of these agents that you're seeing here that do depth limited search,","they do that search.","They take a move, and then they do the search again from the next position.","Right?","That means the plan they have in their head doesn't really have to be","consistent.","Right?","It's just at every step, you do a new plan.","So let's take a look about what this search tree looks like where PAC-MAN","has, say, two dots to eat.","Well, what can we do?","Well, intuitively, you look at it and you're like, eat the dot.","Right?","But he's actually got two choices.","He could eat the dot, or you can head off to the right.","Well, eating the dot is actually better for the score right now.","So if we marked these with their current score, and we just went off of","that, we would actually go eat the dot.","But remember, there's more of a look ahead than that.","What can you do from the left tree?","You could kind of go back.","So you're in the position of being kind of in the middle of the board and","having eaten a dot.","What can you do from the right tree?","Well you can go left, which will put you back where you started, and you","haven't eaten any dots.","You could go right and you can eat a dot.","So you've got two futures here.","What will minimax do?","It's not really much of a minimax, right?","Because there's no min.","But we can write down the points.","So if you get 10 points for a dot, then here we'll have 10 points.","And zero points and 10 points.","So if we run minimax, we'll see all right, this will be 10, this will be","10, the root will be 10.","So from the root, you look and you say, east, west, it's all the same.","Because in two steps, under optimal play, I'm going to get 10 points","either way.","And so there's no reason for PAC-MAN in two steps to eat the dot and then","come back when it could just as easily go for the other dot.","So what's wrong with that?","Well the problem is if we take this branch, look at that state.","It's just like the state at the root.","And it's just as good from that state to go left as to go right.","So we thrash.","What's the problem?","Everybody agrees that this state here is bad.","Right?","But let's look at these other states.","Let's look at here is A and here's B. The score says these are equally good.","But are they?","Are they really equally good?","In both cases we've eaten a dot.","But which one's better, A or B?","A is better.","Why is A better?","We're closer to the next dot.","So this is why the score function here, it is an evaluation function,","but it can be improved.","And so if what we had is-- we could maybe get some partial credit.","Like maybe we can get a point for having been a little bit closer to","that next dot.","Well now A will look better.","And now with the root, this will be 11, this will be 11, and now we're","going to go for the close dot.","And it's not a tie.","Right?","There is a better sequence now.","So let's see what that does.","So here's that same configuration.","Still looking ahead, too.","But now the truncation function is score.","But you get increasing credit for being closer to a dot.","So now we take the same first step.","But now we go straight to the end and don't thrash.","Many of you will see thrashing in your projects.","When you see thrashing, it is usually not a bug in minimax.","It's usually a deficiency in your evaluation function.","All right.","So back to this case of evaluation for PAC-MAN.","What about when it is adversarial?","Well you'll get a chance to play with this kind of evaluation","function for the agent.","So what I'm going to show you is I'm going to show you the flip side.","I'm going to show you the evaluation function for the ghosts.","Now these ghosts may have a kind of deer in the headlights look in their","eyes, but they are in fact now running minimax.","They are adversarial.","And they have an evaluation function.","Let's think about it for a second.","They don't get points for eating dots or anything like that.","They're not trying to get close to dots.","What they're trying to do is they're trying to defeat PAC-MAN.","So they've got things like, am I getting close?","At the end, of course, they can see the game actually end.","And if they get within a horizon where they can see the end of the game,","they're going to take the appropriate tactical action to bring it about.","So let's take a look and see what they do.","You will have seen before the ghosts kind of milling about and wandering","kind of randomly.","These are mastermind ghosts, so let's take a look.","Slower because every agent has to do this stuff.","And oh.","Let's see it again.","So watch.","They generally move towards PAC-MAN, largely based on","the evaluation function.","And at the end they can see what's going to happen, and they take some","fancy tactical action, not because of the evaluation function.","But because minimax can see how they have to move in order to successfully","pin PAC-MAN.","Let's zoom in.","Sometimes I feel bad for PAC-MAN.","OK.","So the question is what's going on here?","And there's actually two agents here.","They are separately doing their own searches.","But when they see a node that the other one controls, they treat it like","a min node.","So even though each agent is actually doing its own search, because they are","both assuming the other one shares its evaluation function, that is, is also","a minimizing agent, we're going to see cooperation emerge.","So this is really pure two player minimax in the sense that there are","actually two minimizing agents.","What's cool about is this shows you how you can get cooperation without","programming it in.","Simply because they're both trying to achieve the same goal, as soon as the","orange agent goes in one direction, the blue agent will compute and see","that the way you can force PAC-MAN to lose is by going the other direction.","And so they're going to flank.","","OK.","One more time.","This is not program behavior.","This is a consequence of minimax.","Right?","Minimax does tactical things very well.","The evaluation function generally determines your strategy.","So here's that flanking tactic again.","They split up.","It's not a joint decision.","It's just they both know that they're trying to achieve the same thing.",""]}